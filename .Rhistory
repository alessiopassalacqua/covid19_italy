name="Hits") %>%
hc_colorAxis(stops= stops,min=min(covid_italy_map$Totale.attualmente.positivi)) %>%
hc_legend(valueDecimals = 0, valueSuffix = "%") %>%
hc_mapNavigation(enabled = TRUE) %>%
hc_add_theme(thm)
})
n <- 4
stops <- data.frame(q = 0:n/n,
c = substring(viridis(n + 1), 0, 7)[(n+1):1],
stringsAsFactors = FALSE)
stops <- list_parse2(stops)
covid_italy_map <-
covid_italy %>%
filter(datetime == ymd("2020-03-04")) %>%
select("Regione","Totale.attualmente.positivi")
highchart(type = "map") %>%
hc_add_series_map(map = map_ita,
df = covid_italy_map,
joinBy = c("name","Regione"),
value = "Totale.attualmente.positivi",
name="Hits") %>%
hc_colorAxis(stops= stops,min=min(covid_italy_map$Totale.attualmente.positivi)) %>%
hc_legend(valueDecimals = 0, valueSuffix = "%") %>%
hc_mapNavigation(enabled = TRUE) %>%
hc_add_theme(thm)
?summarize_all
covid_italy %>%
mutate(Regione = ifelse(.$Regione == "Trento","Trentino-Alto Adige",.$Regione),
Regione = ifelse(.$Regione == "Bolzano","Trentino-Alto Adige",.$Regione)) %>%
group_by(Regione,datetime) %>%
summarize_all(sum())
covid_italy %>%
mutate(Regione = ifelse(.$Regione == "Trento","Trentino-Alto Adige",.$Regione),
Regione = ifelse(.$Regione == "Bolzano","Trentino-Alto Adige",.$Regione)) %>%
group_by(Regione,datetime) %>%
summarize_all(~sum(..))
covid_italy %>%
mutate(Regione = ifelse(.$Regione == "Trento","Trentino-Alto Adige",.$Regione),
Regione = ifelse(.$Regione == "Bolzano","Trentino-Alto Adige",.$Regione)) %>%
group_by(Regione,datetime) %>%
summarize_all(~sum(.))
covid_italy %<>%
mutate(datetime = ymd(datetime),
Regione = as.character(.$Regione))
covid_italy %>%
mutate(Regione = ifelse(.$Regione == "Trento","Trentino-Alto Adige",.$Regione),
Regione = ifelse(.$Regione == "Bolzano","Trentino-Alto Adige",.$Regione)) %>%
group_by(Regione,datetime) %>%
summarize_all(~sum(.))
covid_italy %<>%
mutate(datetime = ymd(datetime),
Regione = as.character(.$Regione))
covid_italy %>%
mutate(Regione = ifelse(.$Regione == "Trento","Trentino-Alto Adige",.$Regione))%>%
mutate( Regione = ifelse(.$Regione == "Bolzano","Trentino-Alto Adige",.$Regione)) %>%
group_by(Regione,datetime) %>%
summarize_all(~sum(.))
covid_italy %<>%
mutate(Regione = ifelse(.$Regione == "Trento","Trentino-Alto Adige",.$Regione))%>%
mutate( Regione = ifelse(.$Regione == "Bolzano","Trentino-Alto Adige",.$Regione)) %>%
group_by(Regione,datetime) %>%
summarize_all(~sum(.))
region_list <- c("Piemonte","Valle d'Aosta","Lombardia","Trentino-Alto Adige","Veneto",
"Friuli V.G.","Liguria","Emilia Romagna","Toscana","Umbria","Marche","Lazio",
"Abruzzo","Molise","Campania","Puglia","Basilicata",
"Calabria","Sicilia","Sardegna")
for(i in 1:20){
map_ita[["features"]][[i]][["properties"]][["name"]] <- region_list[i]
cat(map_ita[["features"]][[i]][["properties"]][["name"]],"\n")
}
covid_italy %>%
filter(datetime == ymd("2020-03-04")) %>%
select(Regione)
levels(covid_italy$Regione)
n <- 4
stops <- data.frame(q = 0:n/n,
c = substring(viridis(n + 1), 0, 7)[(n+1):1],
stringsAsFactors = FALSE)
stops <- list_parse2(stops)
covid_italy_map <-
covid_italy %>%
filter(datetime == ymd("2020-03-04")) %>%
select("Regione","Totale.attualmente.positivi")
highchart(type = "map") %>%
hc_add_series_map(map = map_ita,
df = covid_italy_map,
joinBy = c("name","Regione"),
value = "Totale.attualmente.positivi",
name="Hits") %>%
hc_colorAxis(stops= stops,min=min(covid_italy_map$Totale.attualmente.positivi)) %>%
hc_legend(valueDecimals = 0, valueSuffix = "%") %>%
hc_mapNavigation(enabled = TRUE) %>%
hc_add_theme(thm)
thm <-
hc_theme(
colors = c("#1a6ecc", "#434348", "#90ed7d"),
chart = list(
backgroundColor = "transparent",
style = list(fontFamily = "Source Sans Pro")),
xAxis = list( gridLineWidth = 1)
)
covid_italy %>%
filter(datetime == ymd("2020-03-04")) %>%
select(Regione)
n <- 4
stops <- data.frame(q = 0:n/n,
c = substring(viridis(n + 1), 0, 7)[(n+1):1],
stringsAsFactors = FALSE)
stops <- list_parse2(stops)
covid_italy_map <-
covid_italy %>%
filter(datetime == ymd("2020-03-04")) %>%
select("Regione","Totale.attualmente.positivi")
highchart(type = "map") %>%
hc_add_series_map(map = map_ita,
df = covid_italy_map,
joinBy = c("name","Regione"),
value = "Totale.attualmente.positivi",
name="Hits") %>%
hc_colorAxis(stops= stops,min=min(covid_italy_map$Totale.attualmente.positivi)) %>%
hc_legend(valueDecimals = 0, valueSuffix = "%") %>%
hc_mapNavigation(enabled = TRUE) %>%
hc_add_theme(thm)
covid_italy <- read.csv("https://raw.githubusercontent.com/ondata/covid19italia/master/publication/riepilogoArchivio.csv")
View(covid_italy)
last(covid_italy$datetime)
first(covid_italy$datetime)
first_day <- first(covid_italy$datetime)
#covid_italy_map <-
covid_italy %>%
filter(datetime == first_day) %>%
select("Regione","Totale.attualmente.positivi")
first_day
covid_italy_sum <-
covid_italy %>%
group_by(datetime) %>%
summarize_all(~sum(.))
covid_italy_sum <-
covid_italy %>%
select(-Region)
covid_italy_sum <-
covid_italy %>%
select(-Regione) %>%
group_by(datetime) %>%
summarize_all(~sum(.))
covid_italy_sum$Totale.attualmente.positivi
covid_italy_sum <-
covid_italy_map %>%
select(-Regione) %>%
summarize_all(~sum(.))
covid_italy_sum <-
covid_italy %>%
filter(datetime == first_day) %>%
select(-Regione) %>%
summarize_all(~sum(.))
covid_italy_sum <-
covid_italy %>%
filter(datetime == first_day) %>%
select(-Regione,datetime) %>%
summarize_all(~sum(.))
covid_italy_sum <-
covid_italy %>%
filter(datetime == first_day) %>%
select(-Regione,-datetime) %>%
summarize_all(~sum(.))
ois
pos
pos <- covid_italy_sum$Totale.attualmente.positivi
pos
tot
tot <- covid_italy_sum$CASI.TOTALI
tot
tot <- covid_italy_sum$CASI.TOTALI
valueBox(value = paste(format(tot,
big.mark = ","), "", sep = " "),
caption = "Total Confirmed Cases",
icon = "fas fa-user-md",
color = confirmed_color)
confirmed_color <- "purple"
active_color <- "#1f77b4"
recovered_color <- "forestgreen"
death_color <- "red"
tot <- covid_italy_sum$CASI.TOTALI
valueBox(value = paste(format(tot,
big.mark = ","), "", sep = " "),
caption = "Total Confirmed Cases",
icon = "fas fa-user-md",
color = confirmed_color)
tot
tot <- covid_italy_sum$CASI.TOTALI
valueBox(value = paste(tot), "", sep = " "),
tot <- covid_italy_sum$CASI.TOTALI
valueBox(value = paste(tot, "", sep = " "),
caption = "Total Confirmed Cases",
icon = "fas fa-user-md",
color = confirmed_color)
pos
tot
100*pos/tot
summary(pos)
pos
library(flexdashboard)
library(highcharter)
library(gtrendsR)
library(lubridate)
library(dplyr)
library(stringr)
library(viridisLite)
library(forecast)
library(DT)
library(magrittr)
thm <-
hc_theme(
colors = c("#1a6ecc", "#434348", "#90ed7d"),
chart = list(
backgroundColor = "transparent",
style = list(fontFamily = "Source Sans Pro")),
xAxis = list( gridLineWidth = 1)
)
covid_italy <- read.csv("https://raw.githubusercontent.com/ondata/covid19italia/master/publication/riepilogoArchivio.csv")
covid_italy %<>%
mutate(datetime = ymd(datetime),
Regione = as.character(.$Regione))
covid_italy %<>%
mutate(Regione = ifelse(.$Regione == "Trento","Trentino-Alto Adige",.$Regione))%>%
mutate( Regione = ifelse(.$Regione == "Bolzano","Trentino-Alto Adige",.$Regione)) %>%
group_by(Regione,datetime) %>%
summarize_all(~sum(.))
first_day <- first(covid_italy$datetime)
covid_italy_map <-
covid_italy %>%
select("Regione","Totale.attualmente.positivi")
covid_italy_sum <-
covid_italy %>%
filter(datetime == first_day) %>%
select(-Regione,-datetime) %>%
summarize_all(~sum(.))
map_ita <- readRDS("map_ita_json.RDS")
region_list <- c("Piemonte","Valle d'Aosta","Lombardia","Trentino-Alto Adige","Veneto",
"Friuli V.G.","Liguria","Emilia Romagna","Toscana","Umbria","Marche","Lazio",
"Abruzzo","Molise","Campania","Puglia","Basilicata",
"Calabria","Sicilia","Sardegna")
for(i in 1:20){
map_ita[["features"]][[i]][["properties"]][["name"]] <- region_list[i]
#  cat(map_ita[["features"]][[i]][["properties"]][["name"]],"\n")
}
confirmed_color <- "purple"
active_color <- "#1f77b4"
recovered_color <- "forestgreen"
death_color <- "red"
tot <- covid_italy_sum$CASI.TOTALI
valueBox(value = paste(tot, "", sep = " "),
caption = "Total Confirmed Cases",
icon = "fas fa-user-md",
color = confirmed_color)
pos <- covid_italy_sum$Totale.attualmente.positivi
pos
covid_italy_sum
#covid_italy_sum <-
covid_italy %>%
filter(datetime == first_day) %>%
select(-Regione,-datetime) %>%
summarize_all(~sum(.))
#covid_italy_sum <-
covid_italy %>%
filter(datetime == first_day) %>%
select(-Regione,-datetime) #%>%
#covid_italy_sum <-
covid_italy %>%
filter(datetime == first_day) %>%
select(-Regione,-datetime) #%>%
#covid_italy_sum <-
covid_italy %>%
filter(datetime == first_day) %>%
select(-datetime) #%>%
#covid_italy_sum <-
covid_italy %>%
filter(datetime == first_day) %>%
select(-Regione) #%>%
#covid_italy_sum <-
covid_italy %>%
filter(datetime == first_day) %>%
select(-Regione) %>%
group_by(datetime) %>%
summarize_all(~sum(.,na.rm=T))
glimpse(covid_italy)
#covid_italy_sum <-
covid_italy %>%
filter(datetime == first_day) %>%
mutate(Regione = as.character(Regione)) %>%
glimpse()
#covid_italy_sum <-
covid_italy %>%
filter(datetime == first_day) %>%
ungroup(Regione) %>%
select(-Regione) %>%
group_by(datetime) %>%
summarize_all(~sum(.,na.rm=T))
rec <- covid_italy_sum$DIMESSI.GUARITI
covid_italy <- read.csv("https://raw.githubusercontent.com/ondata/covid19italia/master/publication/riepilogoArchivio.csv")
levels(covid_italy$datetime)
first_day <- first(covid_italy$datetime)
firsta_day
first_day <- first(covid_italy$datetime)
first_day
covid_italy_sum <-
covid_italy %>%
filter(datetime == first_day) %>%
ungroup(Regione) %>%
select(-Regione) %>%
group_by(datetime) %>%
summarize_all(~sum(.,na.rm=T))
covid_italy_sum
covid_italy_sum$CASI.TOTALI
covid_italy <- read.csv("https://raw.githubusercontent.com/ondata/covid19italia/master/publication/riepilogoArchivio.csv")
library(flexdashboard)
library(highcharter)
library(gtrendsR)
library(lubridate)
library(dplyr)
library(stringr)
library(viridisLite)
library(forecast)
library(DT)
library(magrittr)
thm <-
hc_theme(
colors = c("#1a6ecc", "#434348", "#90ed7d"),
chart = list(
backgroundColor = "transparent",
style = list(fontFamily = "Source Sans Pro")),
xAxis = list( gridLineWidth = 1)
)
covid_italy <- read.csv("https://raw.githubusercontent.com/ondata/covid19italia/master/publication/riepilogoArchivio.csv")
covid_italy %<>%
mutate(datetime = ymd(datetime),
Regione = as.character(.$Regione))
covid_italy %<>%
mutate(Regione = ifelse(.$Regione == "Trento","Trentino-Alto Adige",.$Regione))%>%
mutate( Regione = ifelse(.$Regione == "Bolzano","Trentino-Alto Adige",.$Regione)) %>%
group_by(Regione,datetime) %>%
summarize_all(~sum(.))
first_day <- first(covid_italy$datetime)
covid_italy_map <-
covid_italy %>%
select("Regione","Totale.attualmente.positivi")
covid_italy_sum <-
covid_italy %>%
filter(datetime == first_day) %>%
ungroup(Regione) %>%
select(-Regione) %>%
group_by(datetime) %>%
summarize_all(~sum(.,na.rm=T))
map_ita <- readRDS("map_ita_json.RDS")
region_list <- c("Piemonte","Valle d'Aosta","Lombardia","Trentino-Alto Adige","Veneto",
"Friuli V.G.","Liguria","Emilia Romagna","Toscana","Umbria","Marche","Lazio",
"Abruzzo","Molise","Campania","Puglia","Basilicata",
"Calabria","Sicilia","Sardegna")
for(i in 1:20){
map_ita[["features"]][[i]][["properties"]][["name"]] <- region_list[i]
#  cat(map_ita[["features"]][[i]][["properties"]][["name"]],"\n")
}
confirmed_color <- "purple"
active_color <- "#1f77b4"
recovered_color <- "forestgreen"
death_color <- "red"
tot <- covid_italy_sum$CASI.TOTALI
valueBox(value = paste(tot, "", sep = " "),
caption = "Total Confirmed Cases",
icon = "fas fa-user-md",
color = confirmed_color)
pos <- covid_italy_sum$Totale.attualmente.positivi
valueBox(value = paste(as.character(pos), "
(",round(100 * pos/tot , 1),
"%)", sep = ""),
caption = "Active Cases", icon = "fas fa-ambulance",
color = active_color)
rec <- covid_italy_sum$DIMESSI.GUARITI
valueBox(value = paste(format(rec, big.mark = ","), " (",
round(100 * rec / tot, 1),
"%)", sep = ""),
caption = "Recovered Cases", icon = "fas fa-heartbeat",
color = recovered_color)
View(covid_italy_sum)
first
first_day
first(covid_italy$datetime)
first_day <- last(covid_italy$datetime)
first_day
max(covid_italy$datetime)
install.packages(coronavirus)
install.packages("coronavirus")
library(coronavirus)
data(coronavirus)
coronavirus %>% glimpse()
coronavirus %>%
filter(Country.Region =="Italy")
coronavirus %>%
filter(Country.Region =="taly")
coronavirus %>%
filter(Country.Region =="Italy")
coronavirus %>%
glimpse()
coronavirus %>%
filter(Province.State =="Italy")
View(coronavirus)
max(coronavirus$date)
devtools::install_github("RamiKrispin/coronavirus")
library(coronavirus)
data(coronavirus)
coronavirus %>%
filter(Country.Region=="Italy")
library(coronavirus)
data(coronavirus)
coronavirus %>%
filter(Country.Region=="Italy")
library(coronavirus)
devtools::install_github("RamiKrispin/coronavirus")
library(coronavirus)
data(coronavirus)
View(coronavirus)
remove.packages("coronavirus", lib="~/R/win-library/3.6")
devtools::install_github("RamiKrispin/coronavirus")
library(coronavirus)
data(coronavirus)
View(coronavirus)
#devtools::install_github("RamiKrispin/coronavirus")
# library(coronavirus)
coronavirus <- read.csv("https://raw.githubusercontent.com/RamiKrispin/coronavirus-csv/master/coronavirus_dataset.csv")
View(coronavirus)
coronavirus %>%
filter(Country.Region == "Italy")
coronavirus %>%
filter(Country.Region == "Italy",type=="confirmed") %>%
mutate(total_day = cum_sum(cases))
coronavirus %>%
filter(Country.Region == "Italy",type=="confirmed") %>%
mutate(total_day = cumsum(cases))
coronavirus %>%
filter(Country.Region == "Italy") %>%
mutate(total_day = cumsum(type))
coronavirus %>%
filter(Country.Region == "Italy") %>%
mutate(total_day = cumsum(cases))
covid_italy_sum_day <-
covid_italy %>%
ungroup(Regione) %>%
select(-Regione) %>%
group_by(datetime) %>%
summarize_all(~sum(.,na.rm=T))
covid_italy_sum_day
library(xts)
covid_italy_positivi <- xts(covid_italy_sum_day$Totale.attualmente.positivi, covid_italy_sum_day$datetime)
covid_italy_sum_day
names(covid_italy_sum_day)
covid_italy_deceduti <- xts(covid_italy_sum_day$DECEDUTI, covid_italy_sum_day$datetime)
covid_italy_dimessi <- xts(covid_italy_sum_day$DIMESSI.GUARITI, covid_italy_sum_day$datetime)
covid_italy_totali <- xts(covid_italy_sum_day$CASI.TOTALI, covid_italy_sum_day$datetime)
covid_italy_time <- merge.xts(covid_italy_totali,covid_italy_positivi,covid_italy_dimessi,covid_italy_deceduti)
dygraph(covid_italy_time) %>%
dyRangeSelector()
library(dygraphs)
dygraph(covid_italy_time) %>%
dyRangeSelector()
#pos <-
covid_italy_sum_day %>%
filter(datetime == max(datetime))
#pos <-
covid_italy_sum_day %>%
filter(datetime == max(datetime)) %>%
select(Totale.attualmente.positivi ) %>%
pull
pos <-
covid_italy_sum_day %>%
filter(datetime == max(datetime)) %>%
select(Totale.attualmente.positivi ) %>%
pull
max(datetime) -1
max(covid_italy_sum_day$datetime) -1
?ifelse
sign <- ifelse(rec > rec_1,"+","-")
rec_1 <-
covid_italy_sum_day %>%
filter(datetime == max(datetime) - 1) %>%
select(DIMESSI.GUARITI ) %>%
pull
sign <- ifelse(rec > rec_1,"+","-")
sign
rec
rec_1
max(datetime)
max(covid_italy_sum_day$datetime)
covid_italy_sum_day
rec <-
covid_italy_sum_day %>%
filter(datetime == max(datetime)) %>%
select(DIMESSI.GUARITI ) %>%
pull
rec
sign <- ifelse(rec > rec_1,"+","-")
sign
tot <- covid_italy_sum_day %>%
filter(datetime == max(datetime)) %>%
select(CASI.TOTALI ) %>%
pull
tot_1 <- covid_italy_sum_day %>%
filter(datetime == max(datetime)-1) %>%
select(CASI.TOTALI ) %>%
pull
sign <- ifelse(pos > pos_1,"-","+")
tot
tot_1
